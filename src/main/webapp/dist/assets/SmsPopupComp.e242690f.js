import{r as d,i as E,g as M,c as b,o as w,b as P,e,D as B,d as o,w as _,Q as U,t as c,f as x,j as T,G,m as O,n as f,O as V}from"./index.23979a80.js";import{a as A}from"./QSelect.9a093b8d.js";import{C as I}from"./ClosePopup.e0febf44.js";import{B as C}from"./BtnComp_default.472dd05c.js";const R={class:"DialogComp_wrap"},k=e("div",{class:"dialog_header"},[e("span",null,"SMS \uC804\uC1A1")],-1),Q={class:"q-card_a_section_wrap"},H={style:{width:"120px"}},L={style:{width:""}},q=e("td",null,"\uC804\uD654\uBC88\uD638",-1),j=e("td",null,"\uB0B4\uC6A9",-1),$={class:""},z=e("td",null,"\uBCF4\uB0B4\uB294 \uC0AC\uB78C",-1),F={class:"flex_start"},Z={__name:"SmsPopupComp",setup(J){const i=d(!1),S=E("bus"),n=M(),N=d({custCd:n.CUST_CD}),a=d({recvNm:"",recvTel:"",sendNm:"",sendTel:"",content:"",userId:n.USER_ID,loginId:n.LOGIN_ID,brchCd:n.BRCH_CD,userGbCd:n.USER_GB_CD,custNm:n.CUST_NM}),h=b(()=>n.USER_GB_CD==="30"?"\uB2F4\uB2F9\uC790":"\uC57D\uC0AC\uB2D8\uBA85"),p=d(""),v=d(0);async function y(){const t=await f.get("/myPage/popupSms",{params:N.value});n.USER_GB_CD==="10"||n.USER_GB_CD==="20"?(a.value.recvNm=t.CEO_NM,a.value.sendNm=t.EMP_NM,a.value.recvTel=t.SMS_NO.replaceAll("-",""),a.value.sendTel=t.EMP_HP.replaceAll("-",""),p.value=t.SMS_NO):n.USER_GB_CD==="30"&&(a.value.recvNm=t.EMP_NM,a.value.sendNm=t.CEO_NM,a.value.recvTel=t.EMP_HP.replaceAll("-",""),a.value.sendTel=t.TEL_NO.replaceAll("-",""),p.value=t.EMP_HP)}function D(t){let l=0;l=function(s,r,u,m){for(r=u=0;m=s.charCodeAt(u++);r+=m>>11?3:m>>7?2:1);return r}(t),v.value=l}async function g(){let t=0;if(t=function(l,s,r,u){for(s=r=0;u=l.charCodeAt(r++);s+=u>>11?3:u>>7?2:1);return s}(a.value.content),t>80){alert("\uCD5C\uB300 \uAE00\uC790 \uC785\uB825\uC218\uB294 80\uC790 \uAE4C\uC9C0 \uC785\uB825 \uAC00\uB2A5\uD569\uB2C8\uB2E4.");return}try{if(!confirm("SMS\uB97C \uC804\uC1A1 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))return;await f.post("/myPage/sendSms",a.value),V("\uC815\uC0C1\uCC98\uB9AC \uB418\uC5C8\uC2B5\uB2C8\uB2E4."),i.value=!1}catch{alert("\uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.")}}return S.on("sendSms",async()=>{await y()}),(t,l)=>(w(),P("div",R,[e("div",{class:"",onClick:l[0]||(l[0]=s=>i.value=!0)},[B(t.$slots,"default")]),o(O,{modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=s=>i.value=s)},{default:_(()=>[o(U,{style:{padding:"32px"}},{default:_(()=>[k,e("div",Q,[o(A,null,{default:_(()=>[e("tbody",null,[e("tr",null,[e("td",H,c(h.value),1),e("td",L,c(a.value.recvNm),1)]),e("tr",null,[q,e("td",null,c(p.value),1)]),e("tr",null,[j,e("td",null,[o(x,{modelValue:a.value.content,"onUpdate:modelValue":[l[1]||(l[1]=s=>a.value.content=s),l[2]||(l[2]=s=>D(s))],class:"q-card_a_input_textarea",type:"textarea",borderless:"","bottom-slots":"",autogrow:""},{counter:_(()=>[e("div",$,c(v.value)+" / 80 Byte",1)]),_:1},8,["modelValue"])])]),e("tr",null,[z,e("td",F,[e("span",null,c(a.value.sendNm),1),o(C,{"btn-label":"\uC804\uC1A1",class:"btn-line default",onClick:g})])])])]),_:1})]),o(T,{class:"q-card_btn_wrap"},{default:_(()=>[G(o(C,{class:"btn-fill gray","btn-label":"\uB2EB\uAE30"},null,512),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{Z as _};
